version: 2

sources:
  - name: raw
    database: ANALYTICS_PLATFORM
    schema: RAW
    tables:
      - name: transactions_raw
      - name: app_events_raw

models:
  - name: stg_transactions
    columns:
      - name: transaction_id
        tests:
          - not_null
          - unique
      - name: status
        tests:
          - accepted_values:
              values: ["succeeded", "failed", "refunded"]
  - name: stg_app_events
    columns:
      - name: event_id
        tests:
          - not_null
          - unique
      - name: event_type
        tests:
          - accepted_values:
              values: ["signup", "login", "view_page", "click_cta", "start_trial", "upgrade"]
